

<!DOCTYPE html>
<html>

<head>
  <title>Arco Research &amp; Documentation</title>
  <meta charset='utf-8'>

  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.css">
  <link rel="stylesheet" href="/css/highlight-default.css">
  <link rel="stylesheet" href="/css/style.css">

  <link rel="icon" type="image/png"  href="/images/icon.png">
</head>

<body>
  <div id="content" class="container" style="padding-top: 15px">


<link rel="stylesheet" href="/recipes/css/style.css">

<div class="box">
  <a href="/">
    <img src="/images/arco-logo-128.png"
         style="padding: 0 25px" />
  </a>
  <h1 style="display: inline; font-weight: bold; font-size: 2.3em; padding-top: 10px">
    <a href="/recipes" style="color: inherit">Arco Recipes</a>
  </h1>
</div>

<hr style="border: 1px solid #333333">


<h1>Cómo crear documentación</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#imágenes">Imágenes</a></li>
    <li><a href="#código-y-ficheros-de-texto">Código y ficheros de texto</a></li>
  </ul>
</nav>

<div class="recipe-content">
  <h1 id="introducción">Introducción</h1>
<p>La documentación del grupo Arco se genera mediante una herramienta de gestion de <strong>sitios estáticos</strong>, llamada <a href="https://gohugo.io/">Hugo</a>, y se mantiene en una serie de repositorios. Para añadir o editar cualquier contenido, se ha de <strong>conocer</strong> esta estructura, y se deben utilizar las herramientas <strong>adecuadas</strong>.</p>
<p>El objetivo de esta receta es proporcionar una <strong>visión global</strong>, y algunos mecanismos para llevar a cabo la tarea de documentar. Si necesitas más información, puedes visitar la página de <a href="https://gohugo.io/getting-started/">documentación de Hugo</a>.</p>
<h1 id="configuración-del-entorno">Configuración del entorno</h1>
<p>Antes de nada, para poder llevar a cabo esta receta necesitarás:</p>
<ul>
<li>Acceso al repositorio de documentación</li>
<li>Una instalación <strong>actualizada</strong> de GNU/Linux</li>
<li>Manejo <strong>básico</strong> de la terminal</li>
</ul>
<p>Para empezar, instala los paquetes necesarios:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ sudo apt install git hugo make inotify-tools</pre>
</div>
<p>Recuerda que la versión de Hugo que instales ha de ser <code>&gt;= 0.40</code>, lo que puedes comprobar con el siguiente comando:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ hugo version</pre>
</div>
<p>Para poder trabajar con la documentación de Arco, en primer lugar <strong>descárgate el repositorio</strong>:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ git clone git@bitbucket.org:arco_group/doc.git</pre>
</div>
<p>En la raíz del repositorio encontrarás diferentes <strong>directorios</strong>, cada uno específico de una <strong>sección</strong> de la documentación. Así, por ejemplo, el directorio <code>idm</code> contiene la documentación del proyecto IDM, y será accesible desde la URL <code>https://site.url/idm/</code>. Para más información sobre esta estructura, ve a <a href="#c%C3%B3mo-crear-una-nueva-secci%C3%B3n">Como crear una nueva sección</a>.</p>
<p>También deberías ver el directorio <code>hugo-site</code>, que contiene la <strong>configuración</strong> del sitio, algunos ficheros estáticos comunes, plantillas genéricas, etc. Para poder generar y desplegar la documentación, es necesario <strong>sincronizar</strong> el contenido de los directorios de cada sección con el proyecto Hugo. Para ello, se proporciona un <code>Makefile</code> con algunas reglas:</p>
<ul>
<li><code>hugo-clean</code>: <strong>elimina</strong> el contenido del proyecto Hugo, y reestablece la estructura mínima necesaria.</li>
<li><code>hugo-sync</code>: <strong>copia</strong> el contenido de las secciones al proyecto Hugo.</li>
<li><code>keep-sync</code>: lanza un servicio que monitoriza los ficheros de las secciones, y <strong>sincroniza</strong> el proyecto Hugo si hay algún cambio.</li>
<li><code>sync</code>: regla que ejecuta las tres anteriores.</li>
<li><code>run-server</code>: lanza el <strong>servidor de desarrollo</strong> de Hugo, que permite previsualizar el contenido generado mientras realizas cambios.</li>
</ul>
<p>Dado esto, el <em>workflow</em> general que deberías seguir para modificar la documentación es el siguiente:</p>
<ol start="0">
<li><strong>Actualizar</strong> el repositorio: <code>git pull</code></li>
<li>Lanzar el servicio para <strong>sincronizar</strong> el proyecto Hugo: <code>make sync</code></li>
<li>En otra terminal, ejecutar el <strong>servidor</strong> de desarrollo: <code>make run-server</code></li>
<li>Abrir en el navegador la <strong>URL</strong>: <a href="http://localhost:1313">http://localhost:1313</a></li>
<li><strong>Editar</strong>, y revisar que el resultado es el esperado.</li>
<li>Hacer un <strong>commit</strong> con todos los cambios.</li>
</ol>
<h1 id="cómo-editar-un-documento-existente">Cómo editar un documento existente</h1>
<p>Lo primero que debes hacer es <strong>determinar</strong> qué fichero debes editar. Podemos distinguir principalmente dos tipos de contenido: plantillas (en formato <code>.html</code>) y documentos en <a href="https://daringfireball.net/projects/markdown/">Markdown</a> (con la extensión <code>.md</code>). Cada fichero <code>.md</code> se <strong>renderizará</strong> con una plantilla determinada.</p>
<p>Igualmente, cada <strong>sección</strong> (o subsección) del sitio se renderiza con una plantilla específica. El fichero de cabecera de cada sección (el <code>_index.md</code>) puede especificar con qué plantilla se renderizará (con el parámetro <code>layout</code>). Por ejemplo, la sección <code>idm</code>, tiene <code>layout: &quot;home&quot;</code> en su fichero de cabecera, por lo que esa sección se renderizará con la plantilla <code>home.html</code>, situada en el directorio <code>idm/layouts</code>.</p>
<p>Y si lo que quieres es editar <strong>contenido específico</strong> de una entrada (no de una sección), sólo debes buscar el fichero Markdown correspondiente. Por ejemplo, el contenido de la entrada <code>http://site.url/idm/examples/install/</code> lo proporciona el fichero <code>/idm/content/examples/install.md</code>.</p>
<h2 id="imágenes">Imágenes</h2>
<p>Si necesitas incluir <strong>imágenes</strong>, crea un directorio con el mismo nombre que tu entrada (pero <strong>sin</strong> extensión), dentro de <code>[SECTION]/static/images</code>. Por ejemplo, supongamos que estás editando el fichero <code>recipes/content/integrating_xiaomi_devices.md</code>. En este caso, el directorio a crear sería:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ mkdir recipes/static/images/integrating_xiaomi_devices</pre>
</div>
<p>A continuación, incluye tus imágenes dentro de ese directorio, y haz <strong>referencia</strong> a ellas en tu contenido usando el <a href="https://gohugo.io/content-management/shortcodes/">Shortcode</a> <code>image</code>, tal que así:</p>
<div class="app-skin">
  <div class="filename">
    
      snippet.md
    
  </div>
  
  <pre><code class='language-md'>{{&lt; image &#34;filename.png&#34; &gt;}}</code></pre>
</div>
<p>También puedes añadir una <strong>imagen</strong> que esté directamente en el directorio raiz, <code>static/images</code>, de la sección correspondiente. Para ellos, especifica en el shortcode el parámetro <code>relative=&quot;false&quot;</code>. Por ejemplo:</p>
<div class="app-skin">
  <div class="filename">
    
      snippet.md
    
  </div>
  
  <pre><code class='language-md'>{{&lt; image src=&#34;filename.png&#34; relative=&#34;false&#34; &gt;}}</code></pre>
</div>
<h2 id="código-y-ficheros-de-texto">Código y ficheros de texto</h2>
<p>El proceso para incluir el contenido de un fichero <strong>estático</strong> (quizá un script en Python, o un fichero de configuración de Ice) es muy similar al de las imágenes. Antes de nada, <strong>crea el directorio específico</strong> de tu entrada que contendrá estos ficheros en el directorio <code>static/code</code> de tu sección. Debe llamarse de la misma forma que tu página (pero sin la extension <code>.md</code>).</p>
<p>Por ejemplo, si quiero incluir un <em>snippet</em> en Python dentro del post <code>idm/content/hello_world.md</code>, crearé el directorio <code>idm/static/code/hello_world/</code>:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ mkdir idm/static/code/hello_world</pre>
</div>
<p>A continuación, mete en ese directorio todo el código o ficheros estáticos que necesites. Para incluirlos en la entrada, puedes usar el <a href="https://gohugo.io/content-management/shortcodes/">Shortcode</a> <code>staticCode</code>. Acepta dos parámetros: el <strong>nombre del fichero</strong>, y el <strong>lenguage</strong> (opcional, para cuestiones de marcado de sintáxis). Por ejemplo:</p>
<div class="app-skin">
  <div class="filename">
    
      snippet.md
    
  </div>
  
  <pre><code class='language-md'>{{&lt; staticCode &#34;hello_world.py&#34; &gt;}}</code></pre>
</div>
<p>Lo que debe producir un resultado similar a esto:</p>






<div class="app-skin">
  <div class="filename">
    <a download href="/recipes/code/creating_arco_docs/hello-world.py"
	     title="Click to download this code!">hello-world.py</a>
  </div>
  <pre><code class="language-">#!/usr/bin/python3

# example of a hello world
print(&#34;Hello world!&#34;)</code></pre>
</div>
<p>Si lo que necesitas es incluir in <strong>fragmento</strong> de código <em>inline</em> (como los que hay en esta sección), usa el Shortcode <code>code</code>, indicándole el <strong>lenguaje</strong> del <em>snippet</em> que estás incluyendo. Por ejemplo, para mostrar código en C#, sería:</p>
<div class="app-skin">
  <div class="filename">
    
      snippet.md
    
  </div>
  
  <pre><code class='language-md'>{{&lt; code cs &gt;}}
class Service {
  private static int id = 123;
  public string name = &#34;service-123&#34;;
}
{{&lt;/ code &gt;}}</code></pre>
</div>
<p>Lo que mostraría el siguiente resultado:</p>

  
  



  
  





  
  
  



  



<img src='/recipes/images/creating_arco_docs/template-cs-code.png' width='' height=''style='max-width: %!s(&lt;nil&gt;);'/>


<p>Y si lo que quieres es mostrar un comando por la terminal, el Shortcode a usar el <code>shell</code>:</p>
<div class="app-skin">
  <div class="filename">
    
      snippet.md
    
  </div>
  
  <pre><code class='language-md'>{{&lt; shell &gt;}}
$ cat file.txt
...
{{&lt;/ shell &gt;}}</code></pre>
</div>
<h1 id="cómo-crear-una-nueva-sección">Cómo crear una nueva sección</h1>
<p>Para crear una nueva sección, se han creado algunas <strong>herramientas específicas</strong> que se encargan de copiar las plantillas y configurar el proyecto adecuadamente.</p>
<p>Antes de nada, para hacerlas disponibles, carga el fichero <code>arco-doc.sh</code> de la siguiente forma:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ . arco-doc.sh</pre>
</div>
<p>A continuación, ejecuta el script <code>ad-create-section</code>, indicándole el <strong>nombre</strong> de la nueva sección, en minúsculas. Te pedirá más información, como el <strong>tipo</strong> de sección que estás creando, a elegir entre las siguientes:</p>
<ul>
<li><code>project</code>: un proyecto oficial del grupo, como &ldquo;citisim&rdquo; o &ldquo;hesperia&rdquo;.</li>
<li><code>internal-project</code>: proyectos no financiados directamente, en los que se desarrolla algún producto software horizontal.</li>
<li><code>recipes</code>: documentación genérica sobre procesos y otros usos.</li>
</ul>
<p>La herramienta también te pedirá una <strong>breve descripción</strong>, que se mostrará en la portada de la página de documentación. Un ejemplo de ejecución sería este:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ ad-create-section arco-talks
Please, provide the type of section.
Choose from [project, internal-project, recipes, ...]
- recipes
And a brief description? (intro when finish)
- Posts with information about the Arco Talks: topic, date and maybe even the slides!
Creating section dirs...
Populating with initial content...
Adding section to automated tools...
Done.

- You can modify the given parameters in &#39;arco-talks/content/_index.md&#39;
- Also, don&#39;t forget to provide an icon (arco-talks/images/arco-talks-logo.png).</pre>
</div>
<p>Al finalizar, habrá creado un nuevo directorio con el nombre de la sección (<code>arco-talks</code> en el ejemplo), con la siguiente <strong>estructura</strong>:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ tree arco-talks/
arco-talks/
├── content
│   └── _index.md
├── layouts
│   └── partials
│       └── header.html
└── static
    ├── code
    └── images

5 directories, 2 files</pre>
</div>
<p>El directorio <code>content</code> se encargará de almacenar todo el <strong>contenido</strong> de la nueva sección, ficheros Markdown y subsecciones. En <code>layouts</code> se guardarán las <strong>plantillas</strong> específicas para tu contenido. Si no añades ninguna plantilla, se utilizará alguna genérica del sitio. Por último, en <code>static</code> estarán todos los <strong>ficheros estáticos</strong> (css, js, imágenes, código, ejemplos, etc.) de esta sección.</p>
<p>Al crear la nueva sección, también se habrá modificado el <code>Makefile</code> para que las reglas de sincronización tengan en cuenta la nueva entrada. Si tenías el servicio de <em>sync</em> o el servidor de desarrollo de Hugo en marcha, necesitas <strong>reiniciarlos</strong> para aplicar los cambios. Simplemente páralos y vuelve a ejecutar <code>make sync</code> y <code>make run-server</code>. Si vuelves a abrir la página principal de la documentación, deberías poder ver tu nueva sección. Por ejemplo, algo así:</p>

  
  



  
  





  
  
  



  



<img src='/recipes/images/creating_arco_docs/new-section.png' width='' height=''style='max-width: %!s(&lt;nil&gt;);'/>


<p>Como ves, es necesario hacer algunos retoques. Por ejemplo, quizá quieras cambiar el nombre que se muestra aquí (parámetro <code>title</code>), o la ruta del icono (parámetro <code>icon</code>). Para ello, edita el fichero <code>_index.md</code> de tu sección (<code>[SECTION]/content/_index.md</code>). El fichero generado para el ejemplo tiene este contenido:</p>
<div class="app-skin">
  <div class="filename">
    
      arco-talks/content/_index.md
    
  </div>
  
  <pre><code class='language-cpp'>---
type: &#34;recipes&#34;
title: &#34;Arco-talks&#34;
description: &#34;Posts with information about the Arco Talks: topic, date and maybe even the slides!&#34;
icon: &#34;arco-talks/images/arco-talks-logo.png&#34;
---</code></pre>
</div>
<p>En este ejemplo, cambiaré el título, y <strong>reemplazaré</strong> el icono por defecto con uno específico de esta sección. Quedaría algo como esto:</p>

  
  



  
  





  
  
  



  



<img src='/recipes/images/creating_arco_docs/new-section-changes.png' width='' height=''style='max-width: %!s(&lt;nil&gt;);'/>


<p>Si pulsas sobre el botón &ldquo;<em>View</em>&rdquo; (es decir, si navegas con el <em>browser</em> a la sección que acabas de crear), verás un <strong>documento vacío</strong>, con un mensaje animándote a modificar la <strong>cabecera</strong> de tu sección. La cabecera es un fichero HTML (un <em>partial</em> de Hugo) que se incluirá al renderizar todas las páginas de esta sección. Se encuentra en <code>[SECTION]/layouts/partials/header.html</code>. El contenido será algo similar a esto:</p>
<div class="app-skin">
  <div class="filename">
    
      header.html
    
  </div>
  
  <pre><code class='language-html'>{{ partial &#34;header.html&#34; . }}

This is your section ({{ .Section }}) header.
Customize it.</code></pre>
</div>
<p>La primera línea se usa para incluir la cabecera del sitio, <strong>no la modifiques</strong>. El resto puedes cambiarlo según tus <strong>necesidades</strong>. Este es el lugar adecuado para cargar un fichero CSS específico de esta sección, añadir un título, etc. Por ejemplo, la cabecera de la sección <code>arco-talks</code> sería similar a esta:</p>
<div class="app-skin">
  <div class="filename">
    
      arco-talks/layouts/partials/header.html
    
  </div>
  
  <pre><code class='language-html'>{{ partial &#34;header.html&#34; . }}

&lt;link rel=&#34;stylesheet&#34; href=&#34;/{{ .Section }}/css/style.css&#34;&gt;

&lt;div class=&#34;box&#34;&gt;
  &lt;a href=&#34;/&#34;&gt;
    &lt;img src=&#34;/{{ .Section }}/images/arco-talks-logo.png&#34;
         style=&#34;padding: 0 25px; width: 110px&#34; /&gt;
  &lt;/a&gt;
  &lt;h1 style=&#34;display: inline; font-weight: bold; font-size: 2.3em; padding-top: 10px&#34;&gt;
    Arco Talks&lt;/h1&gt;
&lt;/div&gt;

&lt;hr style=&#34;border: 1px solid #333333&#34;&gt;
&lt;br&gt;</code></pre>
</div>
<p>Por otro lado, es importante notar que la <strong>plantilla por defecto</strong> para una sección recién creada será la que hay definida en el tema del <em>site</em>. Es decir, si no creas una plantilla nueva o se lo indicas en el <a href="https://gohugo.io/content-management/front-matter/">Front Matter</a> de tu sección, la plantilla que usará será <code>hugo-site/themes/default/layouts/_default/section.html</code>. Esta plantilla creará una lista con las páginas de tu sección, lo cual, combinado con la cabecera antes descrita, debería ser suficiente.</p>
<p>Sin embago, es posible que necesites <strong>más flexibilidad</strong>, o simplemente quieras crear la página de sección directamente en HTML. Para ello, será necesario que crees una plantilla específica. De entre las diversas formas de hacerlo, la <strong>más sencilla</strong> es indicar explícitamente en el fichero <code>_index.md</code> de la sección qué plantilla usará (parámetro <code>layout</code>). Por ejemplo:</p>
<div class="app-skin">
  <div class="filename">
    
      arco-talks/content/_index.md
    
  </div>
  
  <pre><code class='language-cpp'>---
[...]
icon: &#34;arco-talks/images/arco-talks-logo.png&#34;

layout: &#34;home&#34;
---</code></pre>
</div>
<p>Ahora deberás <strong>crear la plantilla</strong>, con el nombre indicado y extensión <code>.html</code>, en el directorio <code>layouts</code> de la sección. Es importante notar que esta plantilla no forma parte de una de nivel superior, por lo que <strong>tendrás que incluir</strong> los partials <code>header.html</code>, y <code>footer.html</code> del sitio. Puedes utilizar el siguiente fragmento como punto de partida:</p>
<div class="app-skin">
  <div class="filename">
    
      arco-talks/layouts/home.html
    
  </div>
  
  <pre><code class='language-html'>{{ partial (print .Section &#34;/header.html&#34;) . }}

{{ .Content }}

{{ range .Data.Pages }}
  {{ .Render &#34;card&#34; }}
{{ end }}

{{ partial &#34;footer.html&#34; . }}</code></pre>
</div>
<h1 id="cómo-añadir-una-nueva-entrada">Cómo añadir una nueva entrada</h1>
<p>Hugo tiene un comando para crear nuevo contenido, y en función del tipo, copiará una plantilla u otra. Estas plantillas se llaman <a href="https://gohugo.io/content-management/archetypes/">Archetypes</a>, y se encuentran en el directorio <code>hugo-site/archetypes</code>. Así, para crear una nueva entrada, desde la raíz del repositorio, ejecuta el comando:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ hugo new recipes/content/integrating_xiaomi_devices.md</pre>
</div>
<p>Esto creará un nuevo archivo, llamado <code>integrating_xiaomi_devices.md</code> dentro de la sección <code>recipes</code>, en el directorio de contenido (es decir en la ruta especificada). Hugo usará la <strong>primera palabra</strong> de la ruta para determinar el <em>Archetype</em> que empleará a modo de plantilla para la nueva entrada. Si abres el fichero recién creado, verás algo como esto:</p>
<div class="app-skin">
  <div class="filename">
    
      recipes/content/integrating_xiaomi_devices.md
    
  </div>
  
  <pre><code class='language-cpp'>---
title: &#34;Integrating Xiaomi Devices&#34;
date: 2019-02-20T08:05:08&#43;01:00
tags:
- recipe
draft: true

# image: &#34;your-recipe-image.png&#34;
description:  &#34;Some description, used in recipe summary&#34;
---

** Insert your recipe here! **</code></pre>
</div>
<p>Como puedes ver, es <strong>una plantilla</strong> específica de esta sección, de la cual partir para crear tu contenido, en Markdown. Si abres la página principal de la sección <code>recipes</code>, deberás ver una entrada como esta:</p>

  
  



  
  





  
  
  



  



<img src='/recipes/images/creating_arco_docs/new-recipe-summary.png' width='' height=''style='max-width: %!s(&lt;nil&gt;);'/>


<p>Ahora, simplemente <strong>abre ese archivo</strong> con tu editor favorito, y añade el contenido que necesites. Happy editing! :D</p>
<h1 id="cómo-publicar-los-cambios">Cómo publicar los cambios</h1>
<p>Para publicar (o desplegar) los cambios que hagas, simplemente haz <strong>commit</strong> en el repositorio y sube los cambios al servidor. No debes preocuparte de nada más, un servicio <strong>automático</strong> se encargará de compilar y actualizar la página de documentación.</p>
<p>Es <strong>muy recomendable</strong>, sin embargo, que <strong>sólo</strong> subas versiones estables, que se puedan compilar con una versión reciente de Hugo. Para <strong>verificar</strong> si hay o no errores, ejecuta <code>make</code> en la raíz del repositorio y comprueba los mensajes de log. Deberías obtener una salida similar a esta:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ make
make -C hugo-site all
make[1]: se entra en el directorio &#39;/home/oscar/repos/doc/hugo-site&#39;
hugo -v --theme=default
INFO 2019/02/20 11:49:11 Using config file: /home/oscar/repos/doc/hugo-site/config.toml
Building sites … INFO 2019/02/20 11:49:11 syncing static files to /home/oscar/repos/doc/hugo-site/public/
INFO 2019/02/20 11:49:11 found taxonomies: map[string]string{&#34;tag&#34;:&#34;tags&#34;, &#34;category&#34;:&#34;categories&#34;}

                   | EN
&#43;------------------&#43;----&#43;
  Pages            | 31
  Paginator pages  |  0
  Non-page files   |  0
  Static files     | 65
  Processed images |  0
  Aliases          |  0
  Sitemaps         |  1
  Cleaned          |  0

Total in 25 ms
make[1]: se sale del directorio &#39;/home/oscar/repos/doc/hugo-site&#39;</pre>
</div>
<p>Si no hay errores, es una <strong>versión candidata</strong> para ser publicada. Por último, ten en cuenta que en la versión pública no se incluyen los borradores, por lo que asegúrate de cambiar el parámetro <code>draft</code> a <code>false</code> en el <a href="https://gohugo.io/content-management/front-matter/">Front Matter</a> de tus páginas.</p>
<h1 id="cómo-generar-la-referencia-api-de-una-librería-en-python">Cómo generar la referencia (API) de una librería en Python</h1>
<p>Se han creado algunas <strong>herramientas específicas</strong> para generar la documentación de referencia de cualquier librería en <strong>Python</strong>. Esto incluye la descripción de las clases, las propiedades y los métodos (públicos o privados).</p>
<p>Para <strong>entender mejor</strong> como funciona, supongamos que tenemos una librería, llamada <code>mypylib</code> en el directorio <code>/tmp/mypylib</code>. El fichero <code>__init__.py</code> de ese módulo contiene lo siguiente:</p>






<div class="app-skin">
  <div class="filename">
    <a download href="/recipes/code/creating_arco_docs/mypylib/__init__.py"
	     title="Click to download this code!">mypylib/__init__.py</a>
  </div>
  <pre><code class="language-">import sys


class MyUtils:
    &#34;&#34;&#34;
    This is a basic configurable calculator. It enables or disables the `sum`
    operation in yor math space.
    &#34;&#34;&#34;

    def __init__(self, args):
        &#34;&#34;&#34;&#34;&#34;&#34;  # private constructor, avoid documenting it
        self.args = args

    def division(self, a, b):
        # work in progress
        pass

    def sum(self, a, b):
        &#34;&#34;&#34;
        Returns the addition of both arguments, if addition is a valid
        operation.

        **Parameters:**

        * `a`: first operand for the addition. It must be an **integer** or a
          **float**.
        * `b`: second operand for the addition, of same type that `a` param.
        &#34;&#34;&#34;
        assert self.can_sum
        return a &#43; b

    @property
    def can_sum(self):
        &#34;&#34;&#34;
        *[read only]* Property to check whether the `sum` operation could be
        done.
        &#34;&#34;&#34;
        return &#34;sum&#34; in self.args


class MyTools:

    def print(self, msg):
        # work in progress
        pass</code></pre>
</div>
<p>Para generar la documentación automáticamente, primero debes <strong>cargar las herramientas</strong> de <code>arco-doc</code>:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ . arco-doc.sh</pre>
</div>
<p>Una vez hecho esto, tendrás disponible la utilidad <code>ad-gen-py-api</code>, que acepta como argumentos una <strong>lista de los módulos</strong> que quieres documentar, junto con algunas opciones más. En particular, nos interesan estas dos:</p>
<ul>
<li><code>-c MODULE_DIR</code>, que sirve para indicarle la <strong>ruta</strong> donde está el módulo que quieres documentar (útil en caso de que la librería no esté instalada en el sistema).</li>
<li><code>--title TITLE</code>, para añadir un <strong>título</strong> a la documentación.</li>
</ul>
<p>También es importante notar que <code>ad-gen-py-api</code> genera la documentación por la salida estándar, por lo que es necesario que <strong>guardes</strong> esa salida en el fichero <code>.md</code> correspondiente.</p>
<p>Así pues, el comando que usaríamos para documentar la librería de este <strong>ejemplo</strong> sería el siguiente:</p>
<div class="app-skin shell">
  <div class="filename">console</div>
  
  <pre class=shell>$ ad-gen-py-api -c /tmp --title &#34;A Configurable Calculator&#34; mypylib &gt; api/content/mypylib.md</pre>
</div>
<p>Lo que genera un documento Markdown con la referencia de la librería <code>mypylib</code>. Observa que la referencia se ha <strong>guardado en la sección</strong> <code>api</code> de la documentación. Si abres esa página con el navegador, deberías ver algo similar a esto:</p>

  
  
  



  
  


<div class="polaroid">
  <img src='/recipes/images/creating_arco_docs/generated-api.png' />
  
</div>


<p>Como puedes observar, la herramienta ha incluido <strong>sólo</strong> aquellas clases o métodos que <strong>tienen documentación</strong>. Si una clase no incluye su <em>docstring</em> (por ejemplo, la clase <code>MyTools</code>), esa clase <strong>se ignorará</strong> completamente. Lo mismo sucede con los métodos, no se incluirán aquellos cuya <em>docstring</em> está <strong>vacía</strong> o es nula.</p>
<p>Por otro lado, si la clase hereda de otra, y quieres evitar que se incluya el <em>docstring</em> de un método en concreto, puedes <strong>sobreescribirlo</strong> e incluir una cadena vacía (algo similar a lo que ocurre en el ejemplo con el método <code>__init__</code>).</p>
<p>Por último, resaltar que la documentación generará un <strong>índice</strong> al principio con todas las <strong>clases</strong> documentadas, con enlaces a sus respectivas subsecciones.</p>

</div>



    </div> 

    <footer class="footer">
      <div class="container text-center">
        <a href="http://www.arcoresearch.com">ARCO Research Group</a> |
        <a href="/">Docs</a>&nbsp; - &nbsp;made with
        <a href="https://gohugo.io">Hugo</a> ·
        <a href="http://getbootstrap.com">Bootstrap</a>
      </div>
    </footer>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>


