---
title: "Mijia Smart Home API"
comment: "Documentation generated by Arco Docs Python API generator"
date: 2019-02-22T14:42:41+01:00
---

<hr>
# <span class="api-module">mijia</span> API Documentation

## Class <span class="api-class">LumiGateway</span>

This class is used to access a ***Lumi Gateway device*** (provided by Xiaomi/Aqara).
It will automatically try to discover devices on your network, using the *Lumi LAN
protocol*. It installs a thread to listen for incomming events, and also allows you
to change the device light color.


### <span class="api-prop">`status`</span>
A property that provides the status of this device, which could be:

* `unknown`: there is **not enough** information to set a valid status. It receives
  this state when the object is first created.
* `online`: some message arrived **recently** from the device, so it is up
  and running correctly.
* `offline`: the device has **not sent** a heartbeat during its heartbeat period
 (which is variable, but usually 10 minutes).


### <span class="api-func">`__init__`</span>

```py
def __init__(self, passwd=None, mcast_member=None)
```

<br>LumiGateway constructor. This is the **starting point** of the library. You will need
to create an instance of this class, and use it access other devices.

**Parameters:**

* `password`, *[optional]* the Wireless communication protocol **password**, needed to
  change the state of any device (which performs a `write` on the device).
* `mcast_member`, *[optional]* the IP address of the interface that will be used as
  the **multicast member**. This address is used to receive events from the Lumi Gateway.
  If not provided, it will try to **automatically** determine it.


### <span class="api-func">`get_devices`</span>

```py
def get_devices(self, filter=None)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`light_off`</span>

```py
def light_off(self)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_change`</span>

```py
def on_change(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_heartbeat`</span>

```py
def on_heartbeat(self, cb)
```

<br>Installs an **event handler** that will be called when this device sends a `heartbeat`
message.

**Parameters:**

* `cb`: callback function to be called. It must **accept two** parameters: the event
  **name** (a string), and the **device** that produces the event (a `Device` or
  derived object).


### <span class="api-func">`set_light_color`</span>

```py
def set_light_color(self, r=0, g=0, b=0, i=0)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`start`</span>

```py
def start(self)
```

<br>Start the **discovery process**. It will search for an active gateway, and then list its
linked devices. It also starts the *listening thread* to receive messages from
the Gateway. You usually will **need** to call this method.


### <span class="api-func">`wait_until_break`</span>

```py
def wait_until_break(self)
```

<br>**Blocks** the calling thread execution until it receives a `KeyboardInterrupt` (Ctrl+C)
Use it (or use instead an **event loop**) to keep the application **running** while
you wait for incoming events.

<hr>
# <span class="api-module">mijia.devices</span> API Documentation

## Class <span class="api-class">CubeAqgl01</span>

<red>FIXME</red>: missing doc.


### <span class="api-prop">`status`</span>
A property that provides the status of this device, which could be:

* `unknown`: there is **not enough** information to set a valid status. It receives
  this state when the object is first created.
* `online`: some message arrived **recently** from the device, so it is up
  and running correctly.
* `offline`: the device has **not sent** a heartbeat during its heartbeat period
 (which is variable, but usually 10 minutes).


### <span class="api-func">`__init__`</span>

```py
def __init__(self, gw, info)
```

<br>Initialize self.  See help(type(self)) for accurate signature.


### <span class="api-func">`on_alert`</span>

```py
def on_alert(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_flip180`</span>

```py
def on_flip180(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_flip90`</span>

```py
def on_flip90(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_heartbeat`</span>

```py
def on_heartbeat(self, cb)
```

<br>Installs an **event handler** that will be called when this device sends a `heartbeat`
message.

**Parameters:**

* `cb`: callback function to be called. It must **accept two** parameters: the event
  **name** (a string), and the **device** that produces the event (a `Device` or
  derived object).


### <span class="api-func">`on_move`</span>

```py
def on_move(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_rotate`</span>

```py
def on_rotate(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_shake_air`</span>

```py
def on_shake_air(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_tap_twice`</span>

```py
def on_tap_twice(self, cb)
```

<br><red>FIXME</red>: missing doc.

## Class <span class="api-class">Magnet</span>

<red>FIXME</red>: missing doc.


### <span class="api-prop">`status`</span>
A property that provides the status of this device, which could be:

* `unknown`: there is **not enough** information to set a valid status. It receives
  this state when the object is first created.
* `online`: some message arrived **recently** from the device, so it is up
  and running correctly.
* `offline`: the device has **not sent** a heartbeat during its heartbeat period
 (which is variable, but usually 10 minutes).


### <span class="api-func">`__init__`</span>

```py
def __init__(self, gw, info)
```

<br>Initialize self.  See help(type(self)) for accurate signature.


### <span class="api-func">`on_close`</span>

```py
def on_close(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_heartbeat`</span>

```py
def on_heartbeat(self, cb)
```

<br>Installs an **event handler** that will be called when this device sends a `heartbeat`
message.

**Parameters:**

* `cb`: callback function to be called. It must **accept two** parameters: the event
  **name** (a string), and the **device** that produces the event (a `Device` or
  derived object).


### <span class="api-func">`on_no_close`</span>

```py
def on_no_close(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_open`</span>

```py
def on_open(self, cb)
```

<br><red>FIXME</red>: missing doc.

## Class <span class="api-class">Motion</span>

<red>FIXME</red>: missing doc.


### <span class="api-prop">`status`</span>
A property that provides the status of this device, which could be:

* `unknown`: there is **not enough** information to set a valid status. It receives
  this state when the object is first created.
* `online`: some message arrived **recently** from the device, so it is up
  and running correctly.
* `offline`: the device has **not sent** a heartbeat during its heartbeat period
 (which is variable, but usually 10 minutes).


### <span class="api-func">`__init__`</span>

```py
def __init__(self, gw, info)
```

<br>Initialize self.  See help(type(self)) for accurate signature.


### <span class="api-func">`on_heartbeat`</span>

```py
def on_heartbeat(self, cb)
```

<br>Installs an **event handler** that will be called when this device sends a `heartbeat`
message.

**Parameters:**

* `cb`: callback function to be called. It must **accept two** parameters: the event
  **name** (a string), and the **device** that produces the event (a `Device` or
  derived object).


### <span class="api-func">`on_motion`</span>

```py
def on_motion(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_no_motion`</span>

```py
def on_no_motion(self, cb)
```

<br><red>FIXME</red>: missing doc.

## Class <span class="api-class">Plug</span>

<red>FIXME</red>: missing doc.


### <span class="api-prop">`status`</span>
A property that provides the status of this device, which could be:

* `unknown`: there is **not enough** information to set a valid status. It receives
  this state when the object is first created.
* `online`: some message arrived **recently** from the device, so it is up
  and running correctly.
* `offline`: the device has **not sent** a heartbeat during its heartbeat period
 (which is variable, but usually 10 minutes).


### <span class="api-func">`__init__`</span>

```py
def __init__(self, gw, info)
```

<br>Initialize self.  See help(type(self)) for accurate signature.


### <span class="api-func">`on_heartbeat`</span>

```py
def on_heartbeat(self, cb)
```

<br>Installs an **event handler** that will be called when this device sends a `heartbeat`
message.

**Parameters:**

* `cb`: callback function to be called. It must **accept two** parameters: the event
  **name** (a string), and the **device** that produces the event (a `Device` or
  derived object).


### <span class="api-func">`on_switch_off`</span>

```py
def on_switch_off(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_switch_on`</span>

```py
def on_switch_on(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`switch_off`</span>

```py
def switch_off(self)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`switch_on`</span>

```py
def switch_on(self)
```

<br><red>FIXME</red>: missing doc.

## Class <span class="api-class">Switch</span>

<red>FIXME</red>: missing doc.


### <span class="api-prop">`status`</span>
A property that provides the status of this device, which could be:

* `unknown`: there is **not enough** information to set a valid status. It receives
  this state when the object is first created.
* `online`: some message arrived **recently** from the device, so it is up
  and running correctly.
* `offline`: the device has **not sent** a heartbeat during its heartbeat period
 (which is variable, but usually 10 minutes).


### <span class="api-func">`__init__`</span>

```py
def __init__(self, gw, info)
```

<br>Initialize self.  See help(type(self)) for accurate signature.


### <span class="api-func">`on_click`</span>

```py
def on_click(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_double_click`</span>

```py
def on_double_click(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_heartbeat`</span>

```py
def on_heartbeat(self, cb)
```

<br>Installs an **event handler** that will be called when this device sends a `heartbeat`
message.

**Parameters:**

* `cb`: callback function to be called. It must **accept two** parameters: the event
  **name** (a string), and the **device** that produces the event (a `Device` or
  derived object).


### <span class="api-func">`on_long_click_press`</span>

```py
def on_long_click_press(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_long_click_release`</span>

```py
def on_long_click_release(self, cb)
```

<br><red>FIXME</red>: missing doc.

## Class <span class="api-class">WeatherV1</span>

<red>FIXME</red>: missing doc.


### <span class="api-prop">`status`</span>
A property that provides the status of this device, which could be:

* `unknown`: there is **not enough** information to set a valid status. It receives
  this state when the object is first created.
* `online`: some message arrived **recently** from the device, so it is up
  and running correctly.
* `offline`: the device has **not sent** a heartbeat during its heartbeat period
 (which is variable, but usually 10 minutes).


### <span class="api-func">`__init__`</span>

```py
def __init__(self, gw, info)
```

<br>Initialize self.  See help(type(self)) for accurate signature.


### <span class="api-func">`on_heartbeat`</span>

```py
def on_heartbeat(self, cb)
```

<br>Installs an **event handler** that will be called when this device sends a `heartbeat`
message.

**Parameters:**

* `cb`: callback function to be called. It must **accept two** parameters: the event
  **name** (a string), and the **device** that produces the event (a `Device` or
  derived object).


### <span class="api-func">`on_humidity`</span>

```py
def on_humidity(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_pressure`</span>

```py
def on_pressure(self, cb)
```

<br><red>FIXME</red>: missing doc.


### <span class="api-func">`on_temperature`</span>

```py
def on_temperature(self, cb)
```

<br><red>FIXME</red>: missing doc.

